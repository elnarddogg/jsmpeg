/*! wee-promise - 0.1.3 - Bernard McManus - ge2940f - 2014-09-01 */
!function(a){"object"==typeof exports?module.exports=a:window.Promise=window.Promise||a}(function(a,b){function c(a){var b=this;g(b,l,0),g(b,m,[]),g(b,s,[]),g(b,t,[]),g(b,u,[]),b[n]=d(b,t),b[o]=d(b,u),h(function(){a(b[n],b[o])})}function d(a,b){return function(c){h(function(){a[l]||a[w](b,c)[w](s,c)[x]()})}}function e(a,b,c,d,e){return function(){var g=f(a,1),h=f(a,-1);if(i(g)===d){var j=g.map(function(a){return a[m][0]});b(e?j[0]:j)}else i(h)>0&&c(h[0][m][0])}}function f(a,b){return a.filter(function(a){return a[l]===b})}function g(b,c,d){a.defineProperty(b,c,{value:d,writable:!0})}function h(a){b(a,1)}function i(a){return a.length}function j(a,b){a.forEach(b)}var k="prototype",l="state",m="args",n="resolve",o="reject",p="always",q="then",r="catch",s="_"+p,t="_"+q,u="_"+r,v="_addHandler",w="_execHandler",x="_clear",y={};return y[u]=-1,y[t]=1,c[k][v]=function(a,b){var c=this;return b&&c[a].push(b),c},c[k][w]=function(a,b){b=[b];var c=this,d=c[a],e=i(d),f=0;try{for(;e>f&&i(d)>0;)(y[a]?d.shift():d[f]).apply(null,b),f++}catch(g){c[w](u,g)}return c[m]=b,c[l]=y[a]||c[l],c},c[k][p]=function(a){return this[v](s,a)},c[k][q]=function(a,b){return this[v](t,a)[r](b)},c[k][r]=function(a){return this[v](u,a)},c[k][x]=function(){var a=this;a[t]=[],a[u]=[],a[s]=[]},c.all=function(a){return new c(function(b,c){j(a,function(d){d[p](e(a,b,c,i(a)))})})},c.race=function(a){return new c(function(b,c){j(a,function(d){d[p](e(a,b,c,1,!0))})})},c}(Object,setTimeout));